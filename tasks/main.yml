---
- name: Check whether npm/nodejs installed
  ansible.builtin.stat:
    path: /usr/bin/npm
  register: is_npm_installed

- name: Install NPM package 
  ansible.builtin.package:
    name: npm
    state: present
  when: is_npm_installed is defined

- name: Install elasticdump
  ansible.builtin.command: npm install elasticdump -g
  register: result

- name: Make a symlink to /usr/bin location
  ansible.builtin.file:
    src: /usr/local/bin/elasticdump
    dest: /usr/bin/elasticdump
    state: link
